!function(a){var b=[].push,c=[].slice;a.Sub=function(a,b){return new Sub.fn.init(a,b)},a.$||(a.$=a.Sub),Sub.fn=Sub.prototype={length:0,calls:[],init:function(a,c){c=c||document,"string"==typeof a?b.apply(this,c.querySelectorAll(a)):a.nodeType&&b.apply(this,[a])},each:function(a){return Sub.each(this,a,this)},data:function(a,b){var c=this.attr("data-"+a,b);return"true"===c?!0:"false"===c?!1:"null"===c?null:+c+""===c?+c:c},attr:function(a,b){return void 0===b?this[0].getAttribute(a):this.each(function(c){c.setAttribute(a,""+b)})},removeAttr:function(a){return a=a.split(" "),this.each(function(b){for(var c=0;c<a.length;c++)b.removeAttribute(a[c])})},css:function(a){return"string"==typeof a?this[0].style[a]:this.each(function(b){for(var c in a){var d=a[c];isNaN(parseFloat(d))||"zIndex,opacity".match(c)||(d+="px"),b.style[c]=d}})},addClass:function(a){return this.each(function(b){b.className+=" "+a})},removeClass:function(a){return a&&(a=a.split(" ")),this.each(function(b){if(a)for(var c=0;c<a.length;c++)b.className=b.className.replace(a[c],"");else b.className=""})},on:function(a,c){a=a.split(" "),c.guid=c.guid||Sub.guid++;for(var d=0;d<a.length;d++){var e=a[d],f=function(a){var b=function(b){c.call(a,b)};return a.addEventListener?a.addEventListener(e,b,!1):a.attachEvent&&a.attachEvent("on"+e,b),{type:e,el:a,fn:c,wrap:b,guid:c.guid}};b.apply(Sub.fn.calls,Sub.map(this,f,this))}return this},off:function(a,b){var c=Sub.fn.calls;a=a.split(" ");for(var d=0;d<a.length;d++){var e=a[d],f=function(a){for(var d=0;d<c.length;d++){var f=c[d];f.el!==a||f.type!==e&&e||f.guid!==b.guid&&b||(a.removeEventListener?a.removeEventListener(f.type,f.wrap,!1):a.detachEvent&&a.detachEvent("on"+f.type,f.wrap),c.splice(d,1),d-=1)}};this.each(f)}return this}},Sub.fn.init.prototype=Sub.fn,Sub.extend=function(a){for(var b=c.call(arguments,1),d=0;d<b.length;d++)for(var e in b[d])a[e]=b[d][e];return a},Sub.extend(Sub,{guid:1,each:function(a,b,c){if(null!=a){if(a.forEach)a.forEach(b,c);else if(a.length===+a.length)for(var d=0,e=a.length;e>d;d++)b.call(c,a[d],d,a);else for(var f in a)b.call(c,a[f],f,a);return a}},map:function(a,b,c){var d=[];return null==a?d:a.map?a.map(b,c):(Sub.each(a,function(a,e,f){d.push(b.call(c,a,e,f))}),d)},proxy:function(a,b){var d=c.call(arguments,2),e=function(){return a.apply(b||this,d.concat(c.call(arguments)))};return e.guid=a.guid=a.guid||Sub.guid++,e},parseHTML:function(a){var b=document.createElement("div");return b.innerHTML=a,b.childNodes}})}(window),function(a){var b={},c=function(a){return b[a]?b[a]:b[a]=new c.Api(a)};a.pict=c}(window),function(a,b){a.Api=function(a){this.id=a,this.$video=$("#"+a),this.video=this.$video[0]},a.Api.prototype={setup:function(c){var d={template:'<div class="pict-controls"><div class="pict-left"><a href="#" class="pict-play"></a></div><div class="pict-right"><span class="pict-duration">13:20</span><a href="#" class="pict-mute"></a><a href="#" class="pict-fullscreen"></a></div><div class="pict-center"><div class="pict-progress"></div></div></div>'};this.config=$.extend(d,c),this.el=b.createElement("div"),this.el.className="pict-player",this.inner=b.createElement("div"),this.inner.className="pict-inner",this.video.parentNode.insertBefore(this.el,this.video),this.video.parentNode.removeChild(this.video),this.inner.appendChild(this.video),this.el.appendChild(this.inner),$(this.el).css({width:this.$video.attr("width"),height:this.$video.attr("height")}),this.$video.removeAttr("width height"),this.controls=new a.Controls(this,this.config),this.inner.appendChild(this.controls.el)},handle:function(a,c,d){c.match(/\bfullscreen/)&&$(b)[a]("webkitfullscreenchange mozfullscreenchange fullscreenchange",d),c=c.replace(/volume\b/,"volumechange"),this.$video[a](c,d)},on:function(a,b){this.handle("on",a,b)},off:function(a,b){this.handle("off",a,b)},play:function(a){a?this.video.pause():this.video.play()},pause:function(){this.video.pause()},mute:function(a){this.video.muted=a?!1:!0},volume:function(a){this.video.muted=!1,a&&(this.video.volume=a)},fullscreen:function(a){if(a)this.normalscreen();else{var b=this.inner,c=b.requestFullScreen||b.webkitRequestFullScreen||b.mozRequestFullScreen;c.call(b)}},normalscreen:function(){var a=b.cancelFullScreen||b.webkitCancelFullScreen||b.mozCancelFullScreen;a.call(b)},isFullscreen:function(){return!!(b.fullscreenElement||b.webkitIsFullScreen||b.mozFullScreenElement)}}}(pict,document),function(a){a.Controls=function(a,b){this.api=a,this.config=b,this.el=$.parseHTML(b.template)[0],$(this.el).on("click",$.proxy(this.click,this)),a.on("play pause volume fullscreen",$.proxy(this.render,this))},a.Controls.prototype={click:function(a){a.preventDefault(),"A"==a.target.nodeName&&this.action(a)},action:function(a){var b=a.target.className.match(/pict-([^\s]*)/);b&&"play,mute,fullscreen".match(b[1])&&this.api[b[1]]($(a.target).data("state"))},render:function(){$(".pict-play").data("state",!this.api.video.paused),$(".pict-mute").data("state",this.api.video.muted),$(".pict-fullscreen").data("state",this.api.isFullscreen())}}}(pict),function(a){a.Progress=function(){}}(pict);