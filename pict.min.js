!function(a,b){var c={},d=a.pict=function(a){return c[a]?c[a]:c[a]=new d.fn.init(a)};d.fn=d.prototype={init:function(a){this.id=a,this.$video=d.$("#"+a),this.video=this.$video[0]},setup:function(a){var c={controls:!1};return this.config=d.$.extend(c,a),this.video.controls=this.config.controls,this.el=b.createElement("div"),this.el.className="pict-player",this.inner=b.createElement("div"),this.inner.className="pict-inner",this.video.parentNode.insertBefore(this.el,this.video),this.video.parentNode.removeChild(this.video),this.inner.appendChild(this.video),this.el.appendChild(this.inner),d.$(this.el).css({width:this.$video.attr("width"),height:this.$video.attr("height")}),this.$video.removeAttr("width height"),this.controlbar=new d.Controlbar(this),this},handle:function(a,c,e){return c.match(/\bfullscreen/)&&d.$(b)[a]("webkitfullscreenchange mozfullscreenchange fullscreenchange",e),c=c.replace(/volume\b/,"volumechange"),c=c.replace(/(time\b|position)/,"timeupdate"),this.$video[a](c,e),this},on:function(a,b){return this.handle("on",a,b)},off:function(a,b){return this.handle("off",a,b)},load:function(a){return this.video.src=a,this.video.load(),this},play:function(a){return a?this.video.pause():this.video.play(),this},pause:function(){return this.video.pause(),this},mute:function(a){return this.video.muted=a?!1:!0,this},volume:function(a){return this.video.muted=!1,a&&(this.video.volume=a),this},fullscreen:function(a){if(a)this.normalscreen();else{var b=this.inner,c=b.requestFullScreen||b.webkitRequestFullScreen||b.mozRequestFullScreen;c.call(b)}return this},normalscreen:function(){var a=b.cancelFullScreen||b.webkitCancelFullScreen||b.mozCancelFullScreen;return a.call(b),this},isFullscreen:function(){return!!(b.fullscreenElement||b.webkitIsFullScreen||b.mozFullScreenElement)}},d.fn.init.prototype=d.fn}(window,document),function(a){var b={template:'<div class="pict-controls"><div class="pict-left"><a class="pict-play"></a></div><div class="pict-right"><span class="pict-time">00:00</span><a class="pict-mute"></a><a class="pict-fullscreen"></a></div><div class="pict-center"><div class="pict-bar"><div class="pict-progress"></div><div class="pict-position"></div></div></div></div>',delay:1e3};a.Controlbar=function(c,d){this.api=c,this.id=0,this.config=a.$.extend(b,d),this.el=a.$.parseHTML(this.config.template)[0],this.$el=a.$(this.el),c.inner.appendChild(this.el),this.progressBar=new a.Slider({el:".pict-progress"}),this.positionBar=new a.Slider({el:".pict-position",handle:!0,change:a.$.proxy(this.change,this)}),this.listenTo(a.$(c.el),"mousemove",a.$.throttle(this.delayedHide,1e3)),this.listenTo(this.$el,"click",this.click),this.listenTo(this.$el,"transitionend webkitTransitionEnd oTransitionEnd otransitionend MSTransitionEnd",this.hideEnd),this.listenTo(c,"play pause volume fullscreen",this.render),this.listenTo(c,"loadedmetadata timeupdate",this.position),this.listenTo(c,"progress",this.progress)},a.Controlbar.prototype={listenTo:function(b,c,d){b.on(c,a.$.proxy(d,this))},delayedHide:function(){this.show(),this.api.video.paused||(this.id=setTimeout(a.$.proxy(this.hide,this),this.config.delay))},show:function(){clearTimeout(this.id),0==this.$el.css("opacity")&&this.$el.css({visibility:"visible",opacity:1})},hide:function(){1==this.$el.css("opacity")&&this.$el.css({opacity:0})},hideEnd:function(){0==this.$el.css("opacity")&&this.$el.css({visibility:"hidden"})},click:function(a){a.preventDefault&&a.preventDefault(),"A"==a.target.nodeName&&this.action(a)},action:function(b){var c=b.target.className.match(/pict-([^\s]*)/);c&&"play,mute,fullscreen".match(c[1])&&this.api[c[1]]("true"===a.$(b.target).attr("data-state"))},change:function(a){this.api.video.currentTime=this.api.video.duration*a/100},render:function(){var b=this.api.video;this.show(),a.$(".pict-play").attr("data-state",!b.paused),a.$(".pict-mute").attr("data-state",b.muted),a.$(".pict-fullscreen").attr("data-state",this.api.isFullscreen())},position:function(){var b=this.api.video,c=b.currentTime||b.duration;a.$(".pict-time").html(a.$.formatTime(c)),this.positionBar.val(100*(b.currentTime/b.duration))},progress:function(){var a=this.api.video;a.buffered.length>0&&this.progressBar.val(100*(a.buffered.end(a.buffered.length-1)/a.duration))}}}(pict),function(a,b){a.Slider=function(c){var d=!1;this.el=a.$(c.el)[0],this.div=b.createElement("div"),this.el.appendChild(this.div);var e=b.createElement("p");this.el.appendChild(e);var f=function(a){d="mousedown"===a.type,g(a)};a.$(e).on("mousedown",f),a.$(b).on("mouseup",f);var g=function(a){if(d){a.preventDefault&&a.preventDefault();var b=a.pageX-h(e).left;return"function"==typeof c.change&&c.change.call(this,100*(b/e.clientWidth)),!1}};a.$(b).on("mousemove",g),this.a=b.createElement("a"),c.handle&&(this.el.appendChild(this.a),this.a.onmousedown=f);var h=function(a){var b=0,c=0;do b+=a.offsetLeft-a.scrollLeft,c+=a.offsetTop-a.scrollTop;while(a=a.offsetParent);return{left:b,top:c}}},a.Slider.prototype={val:function(a){this.div.style.width=a+"%",this.a.style.left=a+"%",this.a.style.marginLeft=-this.a.clientWidth*a/100+"px"}}}(pict,document),function(a){var b=[].push,c=[].slice,d=a.$=function(a,b){return new d.fn.init(a,b)};d.fn=d.prototype={length:0,calls:[],init:function(a,c){c=c||document,"string"==typeof a?b.apply(this,c.querySelectorAll(a)):a.nodeType&&b.apply(this,[a])},each:function(a){return d.each(this,a,this)},attr:function(a,b){return void 0===b?this[0].getAttribute(a):this.each(function(c){c.setAttribute(a,""+b)})},removeAttr:function(a){return a=a.split(" "),this.each(function(b){for(var c=0;c<a.length;c++)b.removeAttribute(a[c])})},css:function(a){return"string"==typeof a?this[0].style[a]:this.each(function(b){for(var c in a){var d=a[c];isNaN(d)||"zIndex,opacity".match(c)||(d+="px"),b.style[c]=d}})},on:function(a,c){a=a.split(" "),c.guid=c.guid||d.guid++;for(var e=0;e<a.length;e++){var f=a[e],g=function(a){var b=function(b){c.call(a,b)};return a.addEventListener?a.addEventListener(f,b,!1):a.attachEvent&&a.attachEvent("on"+f,b),{type:f,el:a,fn:c,wrap:b,guid:c.guid}};b.apply(d.fn.calls,d.map(this,g,this))}return this},off:function(a,b){var c=d.fn.calls;a=a.split(" ");for(var e=0;e<a.length;e++){var f=a[e],g=function(a){for(var d=0;d<c.length;d++){var e=c[d];e.el!==a||e.type!==f&&f||e.guid!==b.guid&&b||(a.removeEventListener?a.removeEventListener(e.type,e.wrap,!1):a.detachEvent&&a.detachEvent("on"+e.type,e.wrap),c.splice(d,1),d-=1)}};this.each(g)}return this},html:function(a){return this.each(function(b){b.innerHTML=a})}},d.fn.init.prototype=d.fn,d.extend=function(a){for(var b=c.call(arguments,1),d=0;d<b.length;d++)for(var e in b[d])a[e]=b[d][e];return a},d.extend(d,{guid:1,each:function(a,b,c){if(null!=a){if(a.forEach)a.forEach(b,c);else if(a.length===+a.length)for(var d=0,e=a.length;e>d;d++)b.call(c,a[d],d,a);else for(var f in a)b.call(c,a[f],f,a);return a}},map:function(a,b,c){var e=[];return null==a?e:a.map?a.map(b,c):(d.each(a,function(a,d,f){e.push(b.call(c,a,d,f))}),e)},proxy:function(a,b){var e=c.call(arguments,2),f=function(){return a.apply(b||this,e.concat(c.call(arguments)))};return f.guid=a.guid=a.guid||d.guid++,f},parseHTML:function(a){var b=document.createElement("div");return b.innerHTML=a,b.childNodes},formatTime:function(a){var b=parseInt(a/3600,10),c=parseInt(a%3600/60,10),d=parseInt(a%3600%60,10);return(0===b?"":10>b?"0"+b+":":b+":")+(10>c?"0"+c:""+c)+":"+(10>d?"0"+d:""+d)},throttle:function(a,b,c){var d,e,f,g=null,h=0;c=c||{};var i=function(){h=c.leading===!1?0:new Date,g=null,f=a.apply(d,e)};return function(){var j=new Date;h||c.leading!==!1||(h=j);var k=b-(j-h);return d=this,e=arguments,0>=k?(clearTimeout(g),g=null,h=j,f=a.apply(d,e)):g||c.trailing===!1||(g=setTimeout(i,k)),f}}})}(pict);