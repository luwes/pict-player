!function(a,b){var c={},d=a.pict=function(a){return c[a]?c[a]:c[a]=new d.fn.init(a)};d.fn=d.prototype={init:function(a){this.id=a,this.$video=d.$("#"+a),this.video=this.$video[0]},setup:function(a){var c={template:'<div class="pict-controls"><div class="pict-left"><a href="#" class="pict-play"></a></div><div class="pict-right"><span class="pict-time">00:00</span><a href="#" class="pict-mute"></a><a href="#" class="pict-fullscreen"></a></div><div class="pict-center"><div class="pict-progress"></div></div></div>'};this.config=d.$.extend(c,a),this.el=b.createElement("div"),this.el.className="pict-player",this.inner=b.createElement("div"),this.inner.className="pict-inner",this.video.parentNode.insertBefore(this.el,this.video),this.video.parentNode.removeChild(this.video),this.inner.appendChild(this.video),this.el.appendChild(this.inner),d.$(this.el).css({width:this.$video.attr("width"),height:this.$video.attr("height")}),this.$video.removeAttr("width height"),this.controls=new d.Controls(this,this.config),this.inner.appendChild(this.controls.el)},handle:function(a,c,e){c.match(/\bfullscreen/)&&d.$(b)[a]("webkitfullscreenchange mozfullscreenchange fullscreenchange",e),c=c.replace(/volume\b/,"volumechange"),c=c.replace(/(time\b|position)/,"timeupdate"),this.$video[a](c,e)},on:function(a,b){this.handle("on",a,b)},off:function(a,b){this.handle("off",a,b)},play:function(a){a?this.video.pause():this.video.play()},pause:function(){this.video.pause()},mute:function(a){this.video.muted=a?!1:!0},volume:function(a){this.video.muted=!1,a&&(this.video.volume=a)},fullscreen:function(a){if(a)this.normalscreen();else{var b=this.inner,c=b.requestFullScreen||b.webkitRequestFullScreen||b.mozRequestFullScreen;c.call(b)}},normalscreen:function(){var a=b.cancelFullScreen||b.webkitCancelFullScreen||b.mozCancelFullScreen;a.call(b)},isFullscreen:function(){return!!(b.fullscreenElement||b.webkitIsFullScreen||b.mozFullScreenElement)}},d.fn.init.prototype=d.fn}(window,document),function(a){a.Controls=function(b,c){this.api=b,this.config=c,this.el=a.$.parseHTML(c.template)[0],a.$(this.el).on("click",a.$.proxy(this.click,this)),b.on("play pause volume fullscreen",a.$.proxy(this.render,this)),b.on("loadedmetadata timeupdate",a.$.proxy(this.position,this))},a.Controls.prototype={click:function(a){a.preventDefault(),"A"==a.target.nodeName&&this.action(a)},action:function(b){var c=b.target.className.match(/pict-([^\s]*)/);c&&"play,mute,fullscreen".match(c[1])&&this.api[c[1]]("true"===a.$(b.target).attr("data-state"))},render:function(){a.$(".pict-play").attr("data-state",!this.api.video.paused),a.$(".pict-mute").attr("data-state",this.api.video.muted),a.$(".pict-fullscreen").attr("data-state",this.api.isFullscreen())},position:function(){var b=this.api.video.currentTime||this.api.video.duration;a.$(".pict-time").html(a.$.formatTime(b))}}}(pict),function(a){a.Progress=function(){}}(pict),function(a){var b=[].push,c=[].slice,d=a.$=function(a,b){return new d.fn.init(a,b)};d.fn=d.prototype={length:0,calls:[],init:function(a,c){c=c||document,"string"==typeof a?b.apply(this,c.querySelectorAll(a)):a.nodeType&&b.apply(this,[a])},each:function(a){return d.each(this,a,this)},attr:function(a,b){return void 0===b?this[0].getAttribute(a):this.each(function(c){c.setAttribute(a,""+b)})},removeAttr:function(a){return a=a.split(" "),this.each(function(b){for(var c=0;c<a.length;c++)b.removeAttribute(a[c])})},css:function(a){return"string"==typeof a?this[0].style[a]:this.each(function(b){for(var c in a){var d=a[c];isNaN(parseFloat(d))||"zIndex,opacity".match(c)||(d+="px"),b.style[c]=d}})},addClass:function(a){return this.each(function(b){b.className+=" "+a})},removeClass:function(a){return a&&(a=a.split(" ")),this.each(function(b){if(a)for(var c=0;c<a.length;c++)b.className=b.className.replace(a[c],"");else b.className=""})},on:function(a,c){a=a.split(" "),c.guid=c.guid||d.guid++;for(var e=0;e<a.length;e++){var f=a[e],g=function(a){var b=function(b){c.call(a,b)};return a.addEventListener?a.addEventListener(f,b,!1):a.attachEvent&&a.attachEvent("on"+f,b),{type:f,el:a,fn:c,wrap:b,guid:c.guid}};b.apply(d.fn.calls,d.map(this,g,this))}return this},off:function(a,b){var c=d.fn.calls;a=a.split(" ");for(var e=0;e<a.length;e++){var f=a[e],g=function(a){for(var d=0;d<c.length;d++){var e=c[d];e.el!==a||e.type!==f&&f||e.guid!==b.guid&&b||(a.removeEventListener?a.removeEventListener(e.type,e.wrap,!1):a.detachEvent&&a.detachEvent("on"+e.type,e.wrap),c.splice(d,1),d-=1)}};this.each(g)}return this},html:function(a){return this.each(function(b){b.innerHTML=a})}},d.fn.init.prototype=d.fn,d.extend=function(a){for(var b=c.call(arguments,1),d=0;d<b.length;d++)for(var e in b[d])a[e]=b[d][e];return a},d.extend(d,{guid:1,each:function(a,b,c){if(null!=a){if(a.forEach)a.forEach(b,c);else if(a.length===+a.length)for(var d=0,e=a.length;e>d;d++)b.call(c,a[d],d,a);else for(var f in a)b.call(c,a[f],f,a);return a}},map:function(a,b,c){var e=[];return null==a?e:a.map?a.map(b,c):(d.each(a,function(a,d,f){e.push(b.call(c,a,d,f))}),e)},proxy:function(a,b){var e=c.call(arguments,2),f=function(){return a.apply(b||this,e.concat(c.call(arguments)))};return f.guid=a.guid=a.guid||d.guid++,f},parseHTML:function(a){var b=document.createElement("div");return b.innerHTML=a,b.childNodes},formatTime:function(a){var b=parseInt(a/3600,10),c=parseInt(a%3600/60,10),d=parseInt(a%3600%60,10);return(0===b?"":10>b?"0"+b+":":b+":")+(10>c?"0"+c:""+c)+":"+(10>d?"0"+d:""+d)}})}(pict);